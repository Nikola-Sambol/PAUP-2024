@using PAUP_2024.Razno
@model IEnumerable<PAUP_2024.Models.PlaniranaAktivnost>

@{
    ViewBag.Title = "Index";
}

<h2>Popis budućih aktivnosti</h2>

@{
    var danas = DateTime.Today;
    var krajTjedna = danas.AddDays(7 - (int)danas.DayOfWeek);
    var krajMjeseca = new DateTime(danas.Year, danas.Month, DateTime.DaysInMonth(danas.Year, danas.Month));
    var krajGodine = new DateTime(danas.Year, 12, 31);
}

@if (User.Identity.IsAuthenticated)
{
    @Html.ActionLink("Upis aktivnosti", "Create", null, new { @class = "btn btn-success btn-sm" })
}

<h3>Aktivnosti danas</h3>
<table class="table table-bordered">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.nazivAktivnosti)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.vrstaAktivnosti)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.datumAktivnosti)
        </th>

        @if (User.Identity.IsAuthenticated && (User as LogiraniKorisnik).IsInRole(OvlastKorisnik.Administrator))
        {
            <th>
                @Html.DisplayNameFor(model => model.korisnikId)
            </th>
        }
        @if (User.Identity.IsAuthenticated)
        {
            <th>
                Akcije
            </th>
        }
    </tr>

    @foreach (var item in Model)
    {
        if (item.datumAktivnosti == danas)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.nazivAktivnosti)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.vrstaAktivnosti)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.datumAktivnosti)
                </td>
                @if (User.Identity.IsAuthenticated && (User as LogiraniKorisnik).IsInRole(OvlastKorisnik.Administrator))
                {
                    <td>
                        @Html.DisplayFor(modelItem => item.korisnikId)
                    </td>
                }
                @if (User.Identity.IsAuthenticated)
                {
                    <td>
                        @Html.ActionLink("Uredi", "Edit", new { id = item.ID }, new { @class = "btn btn-warning btn-sm" })
                        @Html.ActionLink("Detalji", "Details", new { id = item.ID }, new { @class = "btn btn-info btn-sm" })
                        @Html.ActionLink("Izbriši", "Delete", new { id = item.ID }, new { @class = "btn btn-danger btn-sm" })
                    </td>
                }
            </tr>
        }
    }
</table>

<h3>Aktivnosti ovaj tjedan</h3>
<table class="table table-bordered">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.nazivAktivnosti)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.vrstaAktivnosti)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.datumAktivnosti)
        </th>

        @if (User.Identity.IsAuthenticated && (User as LogiraniKorisnik).IsInRole(OvlastKorisnik.Administrator))
        {
            <th>
                @Html.DisplayNameFor(model => model.korisnikId)
            </th>
        }
        @if (User.Identity.IsAuthenticated)
        {
            <th>
                Akcije
            </th>
        }
    </tr>

    @foreach (var item in Model)
    {
        if (item.datumAktivnosti > danas && item.datumAktivnosti <= krajTjedna)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.nazivAktivnosti)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.vrstaAktivnosti)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.datumAktivnosti)
                </td>
                @if (User.Identity.IsAuthenticated && (User as LogiraniKorisnik).IsInRole(OvlastKorisnik.Administrator))
                {
                    <td>
                        @Html.DisplayFor(modelItem => item.korisnikId)
                    </td>
                }
                @if (User.Identity.IsAuthenticated)
                {
                    <td>
                        @Html.ActionLink("Uredi", "Edit", new { id = item.ID }, new { @class = "btn btn-warning btn-sm" })
                        @Html.ActionLink("Detalji", "Details", new { id = item.ID }, new { @class = "btn btn-info btn-sm" })
                        @Html.ActionLink("Izbriši", "Delete", new { id = item.ID }, new { @class = "btn btn-danger btn-sm" })
                    </td>
                }
            </tr>
        }
    }
</table>

<h3>Aktivnosti ovaj mjesec</h3>
<table class="table table-bordered">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.nazivAktivnosti)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.vrstaAktivnosti)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.datumAktivnosti)
        </th>

        @if (User.Identity.IsAuthenticated && (User as LogiraniKorisnik).IsInRole(OvlastKorisnik.Administrator))
        {
            <th>
                @Html.DisplayNameFor(model => model.korisnikId)
            </th>
        }
        @if (User.Identity.IsAuthenticated)
        {
            <th>
                Akcije
            </th>
        }
    </tr>

    @foreach (var item in Model)
    {
        if (item.datumAktivnosti > danas && item.datumAktivnosti <= krajMjeseca)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.nazivAktivnosti)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.vrstaAktivnosti)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.datumAktivnosti)
                </td>
                @if (User.Identity.IsAuthenticated && (User as LogiraniKorisnik).IsInRole(OvlastKorisnik.Administrator))
                {
                    <td>
                        @Html.DisplayFor(modelItem => item.korisnikId)
                    </td>
                }
                @if (User.Identity.IsAuthenticated)
                {
                    <td>
                        @Html.ActionLink("Uredi", "Edit", new { id = item.ID }, new { @class = "btn btn-warning btn-sm" })
                        @Html.ActionLink("Detalji", "Details", new { id = item.ID }, new { @class = "btn btn-info btn-sm" })
                        @Html.ActionLink("Izbriši", "Delete", new { id = item.ID }, new { @class = "btn btn-danger btn-sm" })
                    </td>
                }
            </tr>
        }
    }
</table>

<h3>Aktivnosti do kraja godine</h3>
<table class="table table-bordered">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.nazivAktivnosti)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.vrstaAktivnosti)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.datumAktivnosti)
        </th>

        @if (User.Identity.IsAuthenticated && (User as LogiraniKorisnik).IsInRole(OvlastKorisnik.Administrator))
        {
            <th>
                @Html.DisplayNameFor(model => model.korisnikId)
            </th>
        }
        @if (User.Identity.IsAuthenticated)
        {
            <th>
                Akcije
            </th>
        }
    </tr>

    @foreach (var item in Model)
    {
        if (item.datumAktivnosti > krajMjeseca && item.datumAktivnosti <= krajGodine)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.nazivAktivnosti)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.vrstaAktivnosti)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.datumAktivnosti)
                </td>
                @if (User.Identity.IsAuthenticated && (User as LogiraniKorisnik).IsInRole(OvlastKorisnik.Administrator))
                {
                    <td>
                        @Html.DisplayFor(modelItem => item.korisnikId)
                    </td>
                }
                @if (User.Identity.IsAuthenticated)
                {
                    <td>
                        @Html.ActionLink("Uredi", "Edit", new { id = item.ID }, new { @class = "btn btn-warning btn-sm" })
                        @Html.ActionLink("Detalji", "Details", new { id = item.ID }, new { @class = "btn btn-info btn-sm" })
                        @Html.ActionLink("Izbriši", "Delete", new { id = item.ID }, new { @class = "btn btn-danger btn-sm" })
                    </td>
                }
            </tr>
        }
    }
</table>